<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dice Throne Creator</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/editor-panel.css">
  <link rel="stylesheet" href="css/preview.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <h1>Dice Throne Creator</h1>
      <div class="header-actions">
        <button id="btn-new" class="btn btn-primary">New Card</button>
        <div class="header-deck">
          <input type="text" id="deckNameInput" placeholder="Deck name">
          <button id="deckCreateBtn" class="btn btn-secondary btn-small" type="button">Create Deck</button>
          <select id="deckSelect"></select>
          <select id="deckCardSelect"></select>
          <button id="deckSaveBtn" class="btn btn-secondary btn-small" type="button">Save Card</button>
          <button id="deckLoadBtn" class="btn btn-secondary btn-small" type="button">Load Card</button>
          <button id="deckDeleteCardBtn" class="btn btn-secondary btn-small" type="button">Delete Card</button>
          <button id="deckDeleteBtn" class="btn btn-secondary btn-small" type="button">Delete Deck</button>
        </div>
        <button id="btn-save" class="btn btn-primary">Save</button>
        <button id="btn-load" class="btn btn-secondary">Load</button>
        <div class="export-menu" id="exportMenu">
          <button id="btn-export" class="btn btn-secondary" type="button" aria-haspopup="true" aria-expanded="false">Export</button>
          <div class="export-menu__panel" id="exportMenuPanel" aria-hidden="true">
            <button class="export-menu__item" type="button" data-export="png">Export PNG</button>
            <button class="export-menu__item" type="button" data-export="json">Export JSON</button>
          </div>
        </div>
        <button id="btn-deck-view" class="btn btn-secondary" type="button">Deck View</button>
        <button id="btn-print-sheet" class="btn btn-secondary" type="button">Print Sheet</button>
        <button id="btn-reset-canvas" class="btn btn-secondary">Reset Canvas</button>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <!-- Left Panel: Editor -->
      <aside class="editor-panel">
        <details class="panel-section" open>
          <summary>Card Properties</summary>
          <div class="panel-content">
            <div class="form-group">
              <label for="cardType">Card Type</label>
              <select id="cardType">
                <option>Hero Upgrade</option>
                <option selected>Action Cards</option>
              </select>
            </div>

            <div class="form-group">
              <label for="cardSubType" id="cardSubTypeLabel">Card Phase</label>
              <select id="cardSubType">
                <option>Main Phase</option>
                <option>Instant</option>
                <option>Roll Phase</option>
              </select>
            </div>

            <div class="form-group">
              <label for="costInput">Cost Badge</label>
              <input type="text" id="costInput" maxlength="6">
              <small class="help-text">Type any value (e.g. 0, 3, 10).</small>
            </div>
            <details class="panel-subsection" open>
              <summary>Card ID</summary>
              <div class="panel-subcontent">
                <div class="form-group">
                  <label for="cardIdInput">Card ID</label>
                  <input type="text" id="cardIdInput" placeholder="ABCD 00 v00" maxlength="11">
                  <small class="help-text">Format: 4 caps, 2 numbers, v, 2 numbers (ex: ABCD 00 v00)</small>
                </div>
                <div class="form-group">
                  <label for="cardIdFontSize">Card ID Size (px)</label>
                  <input type="range" id="cardIdFontSize" min="8" max="48" step="1" value="16">
                  <small class="help-text">Size: <span id="cardIdFontSizeValue">16</span>px</small>
                </div>
                <div class="form-group">
                  <label for="cardIdPositionX">Card ID Horizontal (px)</label>
                  <input type="range" id="cardIdPositionX" min="-10" max="10" step="0.5" value="-3.5">
                  <small class="help-text">X Offset: <span id="cardIdPositionXValue">-3.5</span>px</small>
                </div>
                <div class="form-group">
                  <label for="cardIdPositionY">Card ID Vertical (px)</label>
                  <input type="range" id="cardIdPositionY" min="-10" max="10" step="0.5" value="0">
                  <small class="help-text">Y Offset: <span id="cardIdPositionYValue">0.0</span>px</small>
                </div>
              </div>
            </details>

            <div class="form-group">
              <label for="cardName">Title</label>
              <div class="title-input-row">
                <input type="text" id="cardName" placeholder="Enter title" maxlength="50">
                <div class="title-box-controls">
                  <button type="button" id="titleBoxAdd" class="title-box-add">+ Box</button>
                  <button type="button" id="titleBoxRemove" class="title-box-remove">- Box</button>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="titleFontSelect">Title Font</label>
              <select id="titleFontSelect"></select>
            </div>

            <div class="form-group">
              <label for="titleFontSize">Title Size (px)</label>
              <input type="number" id="titleFontSize" min="8" max="96" step="1" value="38">
            </div>

            <div class="form-group">
              <label for="titleLetterSpacing">Title Spacing (px)</label>
              <input type="range" id="titleLetterSpacing" min="-10" max="10" step="0.5" value="0.5">
              <small class="help-text">Spacing: <span id="titleLetterSpacingValue">0.5</span>px</small>
            </div>

            <div class="form-group">
              <label for="descriptionEditor">Description</label>
              <div id="descriptionToolbar" class="description-toolbar"></div>
              <div id="descriptionEditor" class="description-editor"></div>
            </div>

            <div class="form-group">
              <label for="descriptionBoxScale">Description Box Scale</label>
              <input type="range" id="descriptionBoxScale" min="-3" max="3" step="0.01" value="1">
              <small class="help-text">Scale: <span id="descriptionBoxScaleValue">1.00</span></small>
            </div>

            <div class="form-group">
              <label for="descriptionFontSelect">Description Font</label>
              <select id="descriptionFontSelect"></select>
            </div>

            <div class="form-group">
              <label for="descriptionFontSize">Description Size (px)</label>
              <input type="number" id="descriptionFontSize" min="8" max="96" step="1" value="30">
            </div>

            <div class="form-group">
              <label for="descriptionLineHeight">Description Line Spacing</label>
              <input type="range" id="descriptionLineHeight" min="0.8" max="1.6" step="0.02" value="1.2">
              <small class="help-text">Line spacing: <span id="descriptionLineHeightValue">1.2</span></small>
            </div>

            <div class="form-group">
              <label for="descriptionLetterSpacing">Description Spacing (px)</label>
              <input type="range" id="descriptionLetterSpacing" min="-10" max="10" step="0.5" value="0">
              <small class="help-text">Spacing: <span id="descriptionLetterSpacingValue">0</span>px</small>
            </div>

            <div class="form-group">
              <label for="descriptionBaselineOffset">Description Baseline (px)</label>
              <input type="range" id="descriptionBaselineOffset" min="-5" max="5" step="0.5" value="-1">
              <small class="help-text">Baseline: <span id="descriptionBaselineOffsetValue">-1</span>px</small>
            </div>

            <details class="panel-subsection" open>
              <summary>Ability Dice</summary>
              <div class="panel-subcontent">
                <div class="title-input-row">
                  <select id="abilityDiceSelect"></select>
                  <div class="title-box-controls">
                    <button type="button" id="abilityDiceAddBtn" class="title-box-add">+ Add Dice</button>
                  </div>
                </div>
                <small class="help-text">Slots A-F. Use `{{abilitydice,a}}` through `{{abilitydice,f}}` in text.</small>
                <div id="abilityDiceList" class="ability-dice-list"></div>
              </div>
            </details>
          </div>
        </details>

        <!-- Image Upload Section -->
        <details class="panel-section" open>
          <summary>Card Art</summary>
          <div class="panel-content">
            <div class="form-group">
              <label for="imageUpload">Upload Image</label>
              <input type="file" id="imageUpload" accept="image/*" class="file-input">
              <label for="imageUpload" class="upload-label" style="margin: 0; cursor: pointer;">
                Click to upload or drag and drop
              </label>
              <small class="help-text">Recommended: 600x800px (JPG, PNG, WebP)</small>
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="toggleCropperOnUpload" />
                Open Crop Tool On Upload
              </label>
            </div>
            <div class="form-group">
              <label for="cropMaskSelect">Crop Mask</label>
              <select id="cropMaskSelect">
                <option value="Assets/images/Card Art/Common Loot.png">Common Loot (Default)</option>
                <option value="Assets/Hero Upgrade/Ability Upgrade/hero_upgrade_Ability_background_upper.png">Ability Upgrade Upper</option>
              </select>
            </div>
            <div class="form-group">
              <label for="artSelect">Default Art</label>
              <select id="artSelect">
                <option value="">None</option>
              </select>
            </div>
            <div id="imagePreview" class="image-preview-small"></div>
            <button id="btn-clear-image" class="btn btn-small btn-danger" style="display: none; margin-top: 8px;">Clear Image</button>
          </div>
        </details>

        <!-- Layers -->
        <details class="panel-section" open>
          <summary>Layers</summary>
          <div class="panel-content">
            <div class="form-group layers-group">
              <div class="layer-list-header">
                <h3>Card Elements</h3>
                <label class="layer-show-hidden" for="toggleShowHiddenLayers">
                  <span>Show Hidden</span>
                  <input type="checkbox" id="toggleShowHiddenLayers" />
                </label>
              </div>
              <div id="layerList" class="layer-list">
                <div class="layer-item" data-layer-key="cardBleed" draggable="true">
                  <label><input type="checkbox" id="toggleCardBleed" /> Card Bleed</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="backgroundLower" draggable="true">
                  <label><input type="checkbox" id="toggleBackgroundLower" /> Background Lower</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="backgroundUpper" draggable="true">
                  <label><input type="checkbox" id="toggleBackgroundUpper" /> Background Upper</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="imageFrame" draggable="true">
                  <label><input type="checkbox" id="toggleImageFrame" /> Image Frame</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="frameShading" draggable="true">
                  <label><input type="checkbox" id="toggleFrameShading" /> Frame Shading</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="border" draggable="true">
                  <label><input type="checkbox" id="toggleBorder" /> Border</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="cardId" draggable="true">
                  <label><input type="checkbox" id="toggleCardId" /> Card ID</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="panelUpper" draggable="true">
                  <label><input type="checkbox" id="toggleTitleBar" /> Panel Upper</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="titleText" draggable="true">
                  <label><input type="checkbox" id="toggleTitleText" /> Title</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="topNameGradient" draggable="true">
                  <label><input type="checkbox" id="toggleTopNameGradient" /> Top Name Gradient</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="bottomNameGradient" draggable="true">
                  <label><input type="checkbox" id="toggleBottomNameGradient" /> Bottom Name Gradient</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="artwork" draggable="true">
                  <label><input type="checkbox" id="toggleArtwork" /> Artwork</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="panelBleed" draggable="true">
                  <label><input type="checkbox" id="togglePanelBleed" /> Panel Bleed</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="panelLower" draggable="true">
                  <label><input type="checkbox" id="toggleBottomText" /> Panel Lower</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="secondAbilityFrame" draggable="true">
                  <label><input type="checkbox" id="toggleSecondAbilityFrame" /> Second Ability Frame</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="costBadge" draggable="true">
                  <label><input type="checkbox" id="toggleCostBadge" /> Cost Badge</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="attackModifier" draggable="true">
                  <label><input type="checkbox" id="toggleAttackModifier" /> Attack Modifier (Roll)</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
                <div class="layer-item" data-layer-key="cardText" draggable="true">
                  <label><input type="checkbox" id="toggleCardText" /> Card Text</label>
                  <input type="checkbox" class="layer-hide-toggle" aria-label="Hide layer" />
                  <span class="layer-handle" aria-hidden="true">≡</span>
                </div>
              </div>
            </div>
          </div>
        </details>

        <!-- Reference Overlay -->
        <details class="panel-section">
          <summary>Reference</summary>
          <div class="panel-content">
          <div class="form-group">
            <label for="referenceSelect">Reference Library</label>
            <select id="referenceSelect"></select>
          </div>
          <div class="form-group">
            <label for="referenceImage">Reference Image</label>
            <input type="file" id="referenceImage" accept="image/*" class="file-input">
              <label for="referenceImage" class="upload-label" style="margin: 0; cursor: pointer;">
                Upload Reference Image
              </label>
            </div>
            <div id="referencePreview" class="image-preview-small"></div>
          </div>
        </details>

        <!-- Export -->
        <details class="panel-section">
          <summary>Export</summary>
          <div class="panel-content">
            <div class="form-group">
              <label>
                <input type="checkbox" id="toggleExportBleed" />
                Include Bleed (Print)
              </label>
            </div>
            <small class="help-text">600 DPI bridge size export. Toggle bleed for print-safe margins.</small>
          </div>
        </details>
      </aside>

      <div id="sidebarResizer" class="sidebar-resizer" aria-label="Resize sidebar" role="separator"></div>

      <!-- Right Panel: Preview -->
      <main class="preview-panel">
        <div class="preview-container">
          <div class="reference-toggle">
            <label>
              <input type="checkbox" id="showReference" />
              Show Reference
            </label>
            <label>
              <input type="checkbox" id="showReferenceSideBySide" />
              Side-by-Side
            </label>
            <div class="ref-row">
              <span>Opacity</span>
              <input type="range" id="referenceOpacity" min="0" max="1" step="0.05" value="0.7">
            </div>
          </div>
          <div class="status-effects-toggle">
            <label>
              <input type="checkbox" id="toggleStatusEffects" />
              Status Effects
            </label>
            <label>
              <input type="checkbox" id="toggleOtherCommands" />
              Other Commands
            </label>
          </div>
          <div class="card-preview" id="cardPreview">
            <!-- Layer 0: Card Bleed -->
            <div id="cardBleedLayer" class="card-layer card-layer-card-bleed"></div>

            <!-- Layer 1: Artwork -->
            <div id="artworkLayer" class="card-layer card-layer-artwork">
              <canvas id="artworkPreviewCanvas" class="card-art-canvas"></canvas>
              <img id="cardArtImage" class="card-art-image" alt="Card Art" />
              <div id="cardArtArea" class="art-placeholder"></div>
            </div>
            
            <!-- Layer 3: Background Lower -->
            <div id="backgroundLowerLayer" class="card-layer card-layer-bg-lower"></div>
            
            <!-- Layer 4: Background Upper -->
            <div id="backgroundUpperLayer" class="card-layer card-layer-bg-upper"></div>
            
            <!-- Layer 5: Image Frame -->
            <div id="imageFrameLayer" class="card-layer card-layer-image-frame"></div>

            <!-- Layer 6: Frame Shading -->
            <div id="frameShadingLayer" class="card-layer card-layer-frame-shading"></div>
            
            <!-- Layer 7: Frame -->
            <div id="frameLayer" class="card-layer card-layer-frame"></div>

            <!-- Layer 8: Card ID -->
            <div id="cardIdLayer" class="card-layer card-layer-card-id"></div>

            <!-- Layer 9: Card ID Text -->
            <div id="cardIdTextLayer" class="card-layer card-layer-card-id-text"></div>

            <!-- Layer 10: Panel Bleed -->
            <div id="panelBleedLayer" class="card-layer card-layer-panel-bleed"></div>

            <!-- Layer 11: Panel Lower -->
            <div id="panelLowerLayer" class="card-layer card-layer-panel-lower">
            </div>

            <!-- Layer 11.5: Second Ability Frame -->
            <div id="secondAbilityFrameLayer" class="card-layer card-layer-second-ability-frame"></div>

            <!-- Layer 12: Panel Upper -->
            <div id="panelUpperLayer" class="card-layer card-layer-panel-upper">
            </div>

            <!-- Layer 12.5: Name Gradients -->
            <div id="topNameGradientLayer" class="card-layer card-layer-top-name-gradient"></div>
            <div id="bottomNameGradientLayer" class="card-layer card-layer-bottom-name-gradient"></div>
            
            <!-- Layer 13: Cost Badge -->
            <div id="costBadgeLayer" class="card-layer card-layer-cost-badge"></div>

            <!-- Layer 14: Attack Modifier (Roll Phase only) -->
            <div id="attackModifierLayer" class="card-layer card-layer-attack-modifier"></div>

            <!-- Layer 15: Title -->
            <div id="titleLayer" class="card-layer card-layer-title">
              <div id="cardTitleBar" class="card-title-image"></div>
            </div>

            <!-- Layer 16: Card Description Image -->
            <div id="cardTextLayer" class="card-layer card-layer-card-text">
              <div id="descriptionImageLayer" class="card-description-image"></div>
            </div>
            
            <!-- Reference Overlay -->
            <div id="referenceOverlay" class="reference-overlay"></div>
          </div>
          <!-- Reference Side (for side-by-side view) -->
          <div id="referenceSide" class="reference-side" aria-hidden="true"></div>
        </div>
      </main>
    </div>
  </div>

  <!-- File Input (hidden) -->
  <input type="file" id="fileInput" accept=".json" style="display: none;">

  <!-- Cropper Modal -->
  <div id="cropModal" class="crop-modal" aria-hidden="true">
    <div class="crop-modal__backdrop"></div>
    <div class="crop-modal__panel" role="dialog" aria-label="Crop Artwork">
      <div class="crop-modal__header">
        <h2>Crop Artwork</h2>
        <button id="cropCloseBtn" class="btn btn-secondary btn-small" type="button">Close</button>
      </div>
      <div class="crop-modal__body">
        <div id="cropArea" class="crop-area">
          <img id="cropImage" alt="Crop Art" />
          <img id="cropPreviewImage" alt="Cropped Preview" />
          <div id="cropFrameOverlay" class="crop-frame-overlay"></div>
        </div>
      </div>
      <div class="crop-modal__footer">
        <label for="cropZoom">Zoom</label>
        <input type="range" id="cropZoom" min="0.6" max="3" step="0.02" value="1">
        <button id="cropPreviewBtn" class="btn btn-secondary btn-small" type="button">Preview Crop</button>
        <button id="cropApplyBtn" class="btn btn-primary btn-small" type="button">Apply Crop</button>
      </div>
    </div>
  </div>

  <!-- Deck View Modal -->
  <div id="deckViewModal" class="deck-modal" aria-hidden="true">
    <div class="deck-modal__backdrop"></div>
    <div class="deck-modal__panel" role="dialog" aria-label="Deck View">
      <div class="deck-modal__header">
        <h2>Deck View</h2>
        <div class="deck-modal__actions">
          <div id="deckViewSummary" class="deck-modal__summary"></div>
          <label class="deck-view-scale" for="deckViewScale">
            <span>Scale</span>
            <input type="range" id="deckViewScale" min="0.8" max="1.4" step="0.01" value="1.18">
            <span id="deckViewScaleValue">118%</span>
          </label>
          <button id="deckViewExportBtn" class="btn btn-secondary btn-small" type="button">Export</button>
          <button id="deckViewRefreshBtn" class="btn btn-secondary btn-small" type="button">Refresh</button>
          <button id="deckViewCloseBtn" class="btn btn-secondary btn-small" type="button">Close</button>
        </div>
      </div>
      <div class="deck-modal__body">
        <div id="deckViewStatus" class="deck-view-status"></div>
        <div id="deckTemplate" class="deck-template">
          <div class="deck-template__bg" aria-hidden="true"></div>
          <div id="deckCardGrid" class="deck-card-grid"></div>
          <div class="deck-template__overlay" aria-hidden="true"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Print Sheet Modal -->
  <div id="printSheetModal" class="print-modal" aria-hidden="true">
    <div class="print-modal__backdrop"></div>
    <div class="print-modal__panel" role="dialog" aria-label="Print Sheet Preview">
      <div class="print-modal__header">
        <h2>Print Sheet</h2>
        <div class="print-modal__actions">
          <label class="print-mode-select" for="printModeSelect">
            <span>Mode</span>
            <select id="printModeSelect">
              <option value="standard" selected>Standard</option>
              <option value="compact">Compact</option>
            </select>
          </label>
          <label class="print-mode-select" for="printCardScale">
            <span>Card Scale</span>
            <input type="range" id="printCardScale" min="0.7" max="1.3" step="0.01" value="1">
            <span id="printCardScaleValue">100%</span>
          </label>
          <div class="print-layer-toggles">
            <label><input id="printLayerSafe" type="checkbox" checked> <span id="printLayerSafeLabel">Safe</span></label>
            <label><input id="printLayerCut" type="checkbox" checked> <span id="printLayerCutLabel">Cut</span></label>
          </div>
          <div id="printSheetSummary" class="print-modal__summary"></div>
          <button id="printSheetExportPngBtn" class="btn btn-secondary btn-small" type="button">Export PNG</button>
          <button id="printSheetExportPdfBtn" class="btn btn-secondary btn-small" type="button">Export PDF</button>
          <button id="printSheetPrintBtn" class="btn btn-secondary btn-small" type="button">Print</button>
          <button id="printSheetRefreshBtn" class="btn btn-secondary btn-small" type="button">Refresh</button>
          <button id="printSheetCloseBtn" class="btn btn-secondary btn-small" type="button">Close</button>
        </div>
      </div>
      <div class="print-modal__body">
        <div class="print-selection">
          <div class="print-selection__header">
            <div id="printSelectionSummary" class="print-selection__summary"></div>
            <div class="print-selection__actions">
              <button id="printSelectAllBtn" class="btn btn-secondary btn-small" type="button">Select All</button>
              <button id="printClearSelectionBtn" class="btn btn-secondary btn-small" type="button">Clear</button>
            </div>
          </div>
          <div id="printSelectionList" class="print-selection__list"></div>
        </div>
        <div id="printSheetStatus" class="print-view-status"></div>
        <div id="printSheetPages" class="print-pages">
          <div id="printSheetTemplate" class="print-template">
            <div class="print-template__layer print-template__bg" aria-hidden="true"></div>
            <div id="printSheetGrid" class="print-card-grid"></div>
            <div class="print-template__layer print-template__safe" aria-hidden="true"></div>
            <div class="print-template__layer print-template__cut" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Status Effects Modal -->
  <div id="statusEffectsModal" class="status-modal" aria-hidden="true">
    <div class="status-modal__backdrop"></div>
    <div class="status-modal__panel" role="dialog" aria-label="Status Effects">
      <div class="status-modal__header">
        <h2>Status Effects</h2>
        <button id="statusEffectsCloseBtn" class="btn btn-secondary btn-small" type="button">Close</button>
      </div>
      <div class="status-modal__body">
        <table class="status-table">
          <thead>
            <tr>
              <th>Status Effect</th>
              <th>Command</th>
              <th>Preview</th>
            </tr>
          </thead>
          <tbody id="statusEffectsTableBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Other Commands Modal -->
  <div id="otherCommandsModal" class="status-modal" aria-hidden="true">
    <div class="status-modal__backdrop"></div>
    <div class="status-modal__panel" role="dialog" aria-label="Other Commands">
      <div class="status-modal__header">
        <h2>Other Commands</h2>
        <button id="otherCommandsCloseBtn" class="btn btn-secondary btn-small" type="button">Close</button>
      </div>
      <div class="status-modal__body">
        <table class="status-table">
          <thead>
            <tr>
              <th>Command</th>
              <th>Example</th>
              <th>Preview</th>
            </tr>
          </thead>
          <tbody id="otherCommandsTableBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>
  <script src="js/common.js"></script>
  <script src="js/state.js"></script>
  <script src="js/cardRenderer.js"></script>
  <script src="js/referenceOverlay.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>




